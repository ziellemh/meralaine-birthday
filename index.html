<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday, Mera</title>

  <style>
    * { box-sizing: border-box; }

    body{
  margin:0;
  min-height:100vh;
  overflow:hidden; /* keep locked for other pages */
      background:#000;
      color:#eee;
      font-family:"Courier New", Courier, monospace;
    }

    .page{
      position:absolute;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      padding:24px;
    }
    .page.active{ display:flex; }

    /* page 1 */
    #page1{ background:#111; }
    h1{
      font-size:2.5em;
      color:#ff0055;
      margin:0 0 40px 0;
      text-align:center;
    }
    button{
      background:#ff0055;
      color:#fff;
      border:none;
      padding:12px 26px;
      font-size:1.1em;
      border-radius:6px;
      cursor:pointer;
      transition:background-color .25s, opacity .25s;
      font-family:"Courier New", Courier, monospace;
    }
    button:hover{ background:#cc003f; }
    button:disabled{ opacity:.45; cursor:not-allowed; }

    /* page 2 */
    #page2{
  background:#000;
  align-items:stretch;
  justify-content:flex-start;
  padding:24px 18px;

  /* scroll */
  overflow-y:auto;
  -webkit-overflow-scrolling: touch;
    }
    #textWrap{
  max-width:820px;
  width:100%;
  margin:0 auto;
  font-size:1.15em;
  line-height:1.7em;
  white-space:pre-wrap;
  color:#ccc;

  padding-bottom: 90px; /* so the last lines aren't hidden */
}
    #cursor{
      display:inline-block;
      margin-left:2px;
      animation: blink .9s steps(1) infinite;
    }
    @keyframes blink{
      0%,49%{ opacity:1; }
      50%,100%{ opacity:0; }
    }

    #afterMessage{
  position: sticky;
  bottom: 0;
  width:100%;
  max-width:820px;
  margin: 0 auto;
  padding: 14px 0 8px 0;
  display:flex;
  justify-content:flex-end;

  background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.0));
  opacity:0;
  transform: translateY(6px);
  transition: opacity .35s, transform .35s;
  pointer-events:none;
}
    #afterMessage.show{
  opacity:1;
  transform: translateY(0);
  pointer-events:auto;
}

    /* page 3 transaction */
    #page3{
      background:#000;
      align-items:center;
      justify-content:center;
    }

    .txShell{
      width:min(920px, 94vw);
      border:1px solid rgba(255,255,255,0.14);
      border-radius:16px;
      padding:22px;
      background: rgba(255,255,255,0.03);
      box-shadow: 0 20px 90px rgba(0,0,0,0.55);
      position:relative;
      overflow:hidden;
    }

    .txHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:16px;
    }

    .txTitle{
      font-size:1.05em;
      color:#eee;
      letter-spacing:0.4px;
    }

    .txBadge{
      font-size:0.95em;
      color:#aaa;
      border:1px solid rgba(255,255,255,0.14);
      padding:6px 10px;
      border-radius:999px;
    }

    .txGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }

    .card{
      border:1px solid rgba(255,255,255,0.12);
      border-radius:12px;
      padding:14px;
      background: rgba(0,0,0,0.35);
      position:relative;
    }

    .label{
      color:#999;
      font-size:0.95em;
      margin-bottom:8px;
    }

    .value{
      color:#eee;
      font-size:1.1em;
    }

    /* amount input */
    .amountInput{
      border:1px solid rgba(255,255,255,0.18);
      border-radius:12px;
      padding:12px 12px;
      display:flex;
      align-items:baseline;
      gap:10px;
      background: rgba(0,0,0,0.45);
      transition: border-color .25s, box-shadow .25s;
      min-height: 52px;
    }
    .amountInput.focused{
      border-color: rgba(255,0,85,0.75);
      box-shadow: 0 0 0 3px rgba(255,0,85,0.14);
    }

    .cur{
      color:#bbb;
      font-size:0.92em;
    }

    .amount{
      color:#fff;
      font-weight:800;
      font-size:1.55em;
      letter-spacing:0.6px;
      min-width: 170px;
    }

    .caret{
      display:inline-block;
      width:12px;
      color:#ff0055;
      animation: blink .85s steps(1) infinite;
      transform: translateY(-1px);
    }

    .mini{
      color:#999;
      font-size:0.95em;
      margin-top:8px;
    }

    .divider{
      margin:16px 0;
      height:1px;
      background: rgba(255,255,255,0.10);
    }

    .txActions{
      margin-top:10px;
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
    }

    .ghostBtn{
      background: transparent;
      border:1px solid rgba(255,255,255,0.18);
      color:#ddd;
      padding:10px 16px;
      border-radius:10px;
      font-size:1em;
    }

    .dangerBtn{
      background: transparent;
      border:1px solid rgba(255,0,85,0.55);
      color:#ff4a8c;
      padding:10px 16px;
      border-radius:10px;
      font-size:1em;
      position:relative;
    }

    .primaryBtn{
      background:#ff0055;
      border:none;
      color:#fff;
      padding:10px 16px;
      border-radius:10px;
      font-size:1em;
      opacity:0.55;
      cursor:not-allowed;
    }

    .statusRow{
      margin-top:14px;
      color:#aaa;
      min-height: 26px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    .statusLeft{
      display:flex;
      align-items:center;
      gap:10px;
    }

    .dot{
      width:8px;
      height:8px;
      border-radius:99px;
      background:#666;
      opacity:.9;
    }
    .dot.live{
      background:#ff0055;
      animation: pulse 1.1s infinite;
    }
    @keyframes pulse{
      0%{ transform:scale(1); opacity:.55; }
      50%{ transform:scale(1.35); opacity:1; }
      100%{ transform:scale(1); opacity:.55; }
    }

    .progressWrap{
      width:min(380px, 80vw);
      height:8px;
      border-radius:999px;
      background: rgba(255,255,255,0.10);
      overflow:hidden;
      display:none;
    }
    .progressBar{
      height:100%;
      width:0%;
      background: rgba(255,0,85,0.85);
      transition: width .25s;
    }
    .progressWrap.show{ display:block; }

    .finalMark{
      margin-top:14px;
      color:#ccc;
      font-size:1.05em;
      opacity:0;
      transform: translateY(6px);
      transition: opacity .45s, transform .45s;
    }
    .finalMark.show{
      opacity:1;
      transform: translateY(0);
    }

    /* mouse cursor */
    #mouse{
      position:absolute;
      width:34px;
      height:34px;
      left:0;
      top:0;
      opacity:0;
      transform: translate(0px,0px);
      transition: transform 1.15s ease, opacity .25s ease;
      pointer-events:none;
      z-index: 9999;
      filter: drop-shadow(0 14px 22px rgba(0,0,0,0.75));
    }
    #mouse::before{
      content:"";
      position:absolute;
      left:6px;
      top:2px;
      width:0;
      height:0;
      border-top: 26px solid #fff;
      border-right: 18px solid transparent;
      transform: rotate(12deg);
    }
    #mouse::after{
      content:"";
      position:absolute;
      left:12px;
      top:19px;
      width:14px;
      height:3px;
      background:#fff;
      transform: rotate(55deg);
      border-radius: 2px;
    }

    .clickRing{
      position:absolute;
      width:10px;
      height:10px;
      border:2px solid rgba(255,255,255,0.8);
      border-radius:999px;
      left:50%;
      top:50%;
      transform: translate(-50%,-50%) scale(0.6);
      opacity:0;
      pointer-events:none;
    }
    .clickRing.ping{ animation: ping .45s ease-out; }
    @keyframes ping{
      0%{ opacity:0; transform:translate(-50%,-50%) scale(0.6); }
      20%{ opacity:1; }
      100%{ opacity:0; transform:translate(-50%,-50%) scale(2.1); }
    }

    /* zoom on completion */
    .txShell.zoomTarget{
      transition: transform 900ms ease, filter 900ms ease;
      transform-origin: 72% 38%;
      transform: scale(1.22);
      filter: brightness(1.07);
    }
    .txShell.zoomTarget::before{
      content:"";
      position:absolute;
      inset:-60px;
      background: radial-gradient(circle at 72% 38%,
        rgba(0,0,0,0) 0%,
        rgba(0,0,0,0.55) 65%,
        rgba(0,0,0,0.75) 100%);
      pointer-events:none;
    }

    /* confirmation overlay */
    #confirmOverlay{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,0.68);
      opacity:0;
      pointer-events:none;
      transition: opacity 450ms ease;
      z-index: 50;
 padding: 18px;
  overflow: auto;                 /* allow scrolling if needed */
  -webkit-overflow-scrolling: touch;
    }
    #confirmOverlay.show{
      opacity:1;
      pointer-events:auto;
    }

    .confirmCard{
      width:min(760px, 92vw);
      border:1px solid rgba(255,255,255,0.16);
      border-radius:16px;
      background: rgba(0,0,0,0.72);
      box-shadow: 0 30px 110px rgba(0,0,0,0.65);
      padding:18px;
max-height: calc(100vh - 48px);
overflow: auto;
    }

    .confirmTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }

    .confirmTitle{
      color:#eee;
      letter-spacing:0.4px;
      font-size:1.05em;
    }

    .confirmPill{
      border:1px solid rgba(255,0,85,0.55);
      color:#ff4a8c;
      border-radius:999px;
      padding:6px 10px;
      font-size:0.95em;
    }

    .confirmGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }

    .confirmRow{
      border:1px solid rgba(255,255,255,0.12);
      border-radius:12px;
      padding:12px;
      background: rgba(255,255,255,0.03);
    }

    .confirmLabel{
      color:#999;
      font-size:0.95em;
      margin-bottom:6px;
    }

    .confirmValue{
      color:#eee;
      font-size:1.1em;
    }

    .confirmAmount{
      font-size:1.6em;
      font-weight:800;
      letter-spacing:0.6px;
    }

    .confirmNote{
      margin-top:12px;
      color:#bdbdbd;
      line-height:1.6em;
      font-size:0.98em;
    }

    .confirmTiny{
      margin-top:6px;
      color:#8f8f8f;
      font-size:0.92em;
    }

    .overlayBtn{
      background:transparent;
      border:1px solid rgba(255,255,255,0.25);
      color:#ddd;
      padding:10px 16px;
      border-radius:10px;
      font-family:"Courier New", Courier, monospace;
      cursor:pointer;
    }
    .overlayBtn:hover{
      border-color: rgba(255,255,255,0.45);
      background: rgba(255,255,255,0.03);
    }

    /* page 4 */
    #page4{
      background:#000;
    }
    .finalCenter{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
    }
    .finalText{
      color:#eee;
      font-size:1.6em;
      letter-spacing:0.6px;
      line-height:1.6;
    }
  </style>
</head>

<body>

  <!-- PAGE 1 -->
  <div id="page1" class="page active">
    <h1>Happy Birthday, Mera</h1>
    <button id="toMessage">Continue</button>
  </div>

  <!-- PAGE 2 -->
  <div id="page2" class="page">
    <div style="width:100%;">
      <div id="textWrap">
        <span id="typed"></span><span id="cursor">█</span>
      </div>
      <div id="afterMessage">
        <button id="toTransfer">Continue</button>
      </div>
    </div>
  </div>

  <!-- PAGE 3 -->
  <div id="page3" class="page">
    <div class="txShell" id="txShell">
      <div id="mouse"><div class="clickRing" id="ring"></div></div>

      <div class="txHeader">
        <div class="txTitle">transaction</div>
        <div class="txBadge" id="txBadge">draft</div>
      </div>

      <div class="txGrid">
        <div class="card">
          <div class="label">to</div>
          <div class="value">mera</div>
          <div class="mini">transferring to GCASH account</div>
        </div>

        <div class="card">
          <div class="label">amount</div>

          <div class="amountInput" id="amountBox">
            <span class="cur">php</span>
            <span class="amount" id="amt">0</span>
            <span class="caret" id="amtCaret">█</span>
          </div>

          <div class="mini" id="amtHint">waiting for input</div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="txActions">
        <button class="ghostBtn" id="backBtn" disabled>back</button>
        <button class="dangerBtn" id="cancelBtn">cancel transaction</button>
        <button class="primaryBtn" id="sendBtn">transfer</button>
      </div>

      <div class="statusRow">
        <div class="statusLeft">
          <span class="dot" id="dot"></span>
          <span id="statusText">idle</span>
        </div>

        <div class="progressWrap" id="progressWrap" aria-hidden="true">
          <div class="progressBar" id="progressBar"></div>
        </div>
      </div>

      <div class="finalMark" id="finalMark">
        transfer completed.
        <div class="mini" id="finalMini">php 7000.00</div>
      </div>

      <!-- confirmation overlay -->
      <div id="confirmOverlay" aria-hidden="true">
        <div class="confirmCard">
          <div class="confirmTop">
            <div class="confirmTitle">transfer confirmation</div>
            <div class="confirmPill">successful</div>
          </div>

          <div class="confirmGrid">
            <div class="confirmRow">
              <div class="confirmLabel">recipient</div>
              <div class="confirmValue">mera</div>
              <div class="confirmTiny">gcash account</div>
            </div>

            <div class="confirmRow">
              <div class="confirmLabel">amount</div>
              <div class="confirmValue"><span class="confirmAmount">php 7000.00</span></div>
              <div class="confirmTiny">real time processing</div>
            </div>

            <div class="confirmRow">
              <div class="confirmLabel">status</div>
              <div class="confirmValue">completed</div>
              <div class="confirmTiny">remittance posting may vary</div>
            </div>

            <div class="confirmRow">
              <div class="confirmLabel">note</div>
              <div class="confirmValue">you may close this page</div>
              <div class="confirmTiny">receipt will remain available</div>
            </div>
          </div>

          <div class="confirmNote">
            transfer successfully sent to gcash account. remittance posting time may vary. the recipient may take a while to see the funds reflected in their account.
            <div class="confirmTiny">
              if the recipient does not receive it immediately, ask them to refresh their app or check again shortly.
            </div>
          </div>

          <div style="margin-top:18px; text-align:right;">
            <button id="toFinal" class="overlayBtn">continue</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- PAGE 4 -->
  <div id="page4" class="page">
    <div class="finalCenter">
      <div class="finalText">
        happy birthday, mera.<br>
        goodbye.
      </div>
    </div>
  </div>

  <script>
    /* pages */
    const page1 = document.getElementById("page1");
    const page2 = document.getElementById("page2");
    const page3 = document.getElementById("page3");
    const page4 = document.getElementById("page4");

    const toMessage = document.getElementById("toMessage");
    const toTransfer = document.getElementById("toTransfer");
    const afterMessage = document.getElementById("afterMessage");

    function showPage(n){
      [page1,page2,page3,page4].forEach(p => p.classList.remove("active"));
      n.classList.add("active");
    }

    /* built-in click audio */
    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    let audioCtx = null;
    let masterGain = null;

    function initAudio(){
      if (!audioCtx){
        audioCtx = new AudioCtx();
        masterGain = audioCtx.createGain();
        masterGain.gain.value = 0.35;
        masterGain.connect(audioCtx.destination);
      }
    }

    function clickSound(intensity){
      if (!audioCtx || audioCtx.state !== "running") return;

      const bufferSize = 512;
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);

      for (let i = 0; i < bufferSize; i++){
        data[i] = (Math.random() * 2 - 1) * (1 - i / bufferSize);
      }

      const source = audioCtx.createBufferSource();
      source.buffer = buffer;

      const gain = audioCtx.createGain();
      const now = audioCtx.currentTime;

      gain.gain.setValueAtTime(Math.max(0.001, intensity), now);
      gain.gain.exponentialRampToValueAtTime(0.001, now + 0.035);

      source.connect(gain);
      gain.connect(masterGain);

      source.start(now);
      source.stop(now + 0.04);
    }

    function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

    /* page 2 typing */
    const typed = document.getElementById("typed");
    const cursor = document.getElementById("cursor");

    const messageText = `You have enough people wishing you happy birthday. You will not notice this.

I had this ready before things fell apart before you made it clear I was not worth a response.

I do not feel like sending it anymore. But I will. Not for you. For the version of me that still gave a damn.

Silence says a lot. You have said enough.

I will give you this, and then I am done. No reply needed. No more pretending. You made that choice first.`;

    const MSG_START_DELAY = 1600;
    const MSG_BASE_SPEED = 88;
    const MSG_VOL_START = 0.05;
    const MSG_VOL_END = 0.32;

    function msgDelayFor(ch, nextCh){
      if (ch === "\n" && nextCh === "\n") return 1100;
      if (ch === "\n") return 680;
      if (ch === ".") return 520;
      if (ch === ",") return 320;
      if (ch === "!") return 560;
      if (ch === "?") return 560;
      return MSG_BASE_SPEED;
    }

    let msgIndex = 0;
    let msgTyping = false;

    function typeMessage(){
      if (!msgTyping) return;

      if (msgIndex >= messageText.length){
        cursor.style.opacity = "0";
        afterMessage.classList.add("show");
        return;
      }

      const ch = messageText.charAt(msgIndex);
      typed.textContent += ch;
page2.scrollTop = page2.scrollHeight;

      const progress = msgIndex / Math.max(1, messageText.length - 1);
      const intensity = MSG_VOL_START + (MSG_VOL_END - MSG_VOL_START) * progress;
      if (ch !== " " && ch !== "\n") clickSound(intensity);

      const nextCh = messageText.charAt(msgIndex + 1);
      const d = msgDelayFor(ch, nextCh);
      msgIndex++;
      setTimeout(typeMessage, d);
    }

    function startMessage(){
      typed.textContent = "";
      cursor.style.opacity = "1";
      afterMessage.classList.remove("show");
      msgIndex = 0;
      msgTyping = true;
      setTimeout(typeMessage, MSG_START_DELAY);
    }

    /* transaction scene */
    const txShell = document.getElementById("txShell");
    const mouse = document.getElementById("mouse");
    const ring = document.getElementById("ring");

    const amountBox = document.getElementById("amountBox");
    const amtEl = document.getElementById("amt");
    const amtCaret = document.getElementById("amtCaret");
    const amtHint = document.getElementById("amtHint");

    const cancelBtn = document.getElementById("cancelBtn");
    const sendBtn = document.getElementById("sendBtn");
    const txBadge = document.getElementById("txBadge");

    const dot = document.getElementById("dot");
    const statusText = document.getElementById("statusText");

    const progressWrap = document.getElementById("progressWrap");
    const progressBar = document.getElementById("progressBar");

    const finalMark = document.getElementById("finalMark");
    const finalMini = document.getElementById("finalMini");

    const confirmOverlay = document.getElementById("confirmOverlay");
    const toFinal = document.getElementById("toFinal");

    function setStatus(t, live=false){
      statusText.textContent = t;
      dot.classList.toggle("live", !!live);
    }

    function setProgress(on, pct=0){
      progressWrap.classList.toggle("show", !!on);
      progressBar.style.width = `${pct}%`;
    }

    function shellLocalFromViewport(x, y){
      const r = txShell.getBoundingClientRect();
      return { x: (x - r.left) - 8, y: (y - r.top) - 6 };
    }

    async function moveMouseTo(el, extraX=0, extraY=0, ms=1250){
      const r = el.getBoundingClientRect();
      const targetX = r.left + (r.width * 0.5) + extraX;
      const targetY = r.top + (r.height * 0.5) + extraY;
      const local = shellLocalFromViewport(targetX, targetY);

      mouse.style.opacity = "1";
      mouse.style.transitionDuration = ms + "ms";
      mouse.style.transform = `translate(${local.x}px, ${local.y}px)`;
      await sleep(ms + 60);
    }

    async function mouseClick(){
      ring.classList.remove("ping");
      void ring.offsetWidth;
      ring.classList.add("ping");
      clickSound(0.10);
      await sleep(260);
    }

    function focusAmount(on){
      amountBox.classList.toggle("focused", !!on);
      amtCaret.style.opacity = on ? "1" : "0";
    }

    async function clearAmountSlow(){
      let s = amtEl.textContent;
      while (s.length > 0){
        s = s.slice(0, -1);
        amtEl.textContent = s || "0";
        clickSound(0.07);
        await sleep(90);
      }
      amtEl.textContent = "0";
    }

    async function typeAmountSlow(str){
      amtEl.textContent = "";
      for (let i = 0; i < str.length; i++){
        amtEl.textContent += str[i];
        const p = i / Math.max(1, str.length - 1);
        const intensity = 0.07 + (0.18 - 0.07) * p;
        clickSound(intensity);
        await sleep(210);
      }
      await sleep(450);
    }

    async function almostTransferPhase(){
      sendBtn.style.opacity = "1";
      sendBtn.style.cursor = "default";
      txBadge.textContent = "ready";
      setStatus("ready to transfer", true);
      await sleep(700);

      await moveMouseTo(sendBtn, 8, 2, 1200);
      await sleep(500);
      await mouseClick();

      setStatus("almost transferring", true);
      txBadge.textContent = "processing";

      setProgress(true, 0);
      for (let p = 0; p <= 84; p += 7){
        setProgress(true, p);
        clickSound(0.06 + (p/100)*0.08);
        await sleep(260);
      }
      await sleep(700);
    }

    async function cancelInterrupt(){
      setStatus("stopping transaction", true);

      await moveMouseTo(cancelBtn, 10, 0, 1050);
      await sleep(350);
      await mouseClick();

      cancelBtn.disabled = true;
      cancelBtn.textContent = "transaction canceled";
      cancelBtn.style.borderColor = "rgba(255,255,255,0.25)";
      cancelBtn.style.color = "#ddd";

      txBadge.textContent = "canceled";
      setStatus("canceled", false);
      setProgress(false, 0);

      await sleep(950);
    }

    async function finalizeTransfer7000(){
      txBadge.textContent = "draft";
      amtHint.textContent = "adjusting amount";
      setStatus("editing amount", true);

      await moveMouseTo(amountBox, -120, 0, 1200);
      await sleep(350);
      await mouseClick();
      focusAmount(true);

      await sleep(450);
      await clearAmountSlow();
      await sleep(350);
      await typeAmountSlow("7000");

      focusAmount(false);

      txBadge.textContent = "processing";
      setStatus("transferring", true);

      await moveMouseTo(sendBtn, 8, 2, 1200);
      await sleep(450);
      await mouseClick();

      setProgress(true, 0);
      for (let p = 0; p <= 100; p += 5){
        setProgress(true, p);
        clickSound(0.06 + (p/100)*0.10);
        await sleep(220);
      }

      await sleep(650);

      txBadge.textContent = "completed";
      setStatus("transfer completed", false);
      dot.classList.remove("live");
      setProgress(false, 0);

      finalMini.textContent = "php 7000.00";
      finalMark.classList.add("show");

      txShell.classList.add("zoomTarget");
      setTimeout(() => { confirmOverlay.classList.add("show"); }, 900);
      setTimeout(() => { mouse.style.opacity = "0"; }, 900);
    }

    async function runTransactionScene(){
      // reset
      confirmOverlay.classList.remove("show");
      txShell.classList.remove("zoomTarget");

      finalMark.classList.remove("show");
      txBadge.textContent = "draft";
      amtHint.textContent = "waiting for input";
      setStatus("idle", false);
      setProgress(false, 0);

      cancelBtn.disabled = false;
      cancelBtn.textContent = "cancel transaction";
      cancelBtn.style.borderColor = "rgba(255,0,85,0.55)";
      cancelBtn.style.color = "#ff4a8c";

      sendBtn.style.opacity = "0.55";
      sendBtn.style.cursor = "not-allowed";

      mouse.style.opacity = "0";
      mouse.style.transform = "translate(0,0)";
      focusAmount(false);
      amtEl.textContent = "0";

      await sleep(800);

      setStatus("opening amount field", true);
      await moveMouseTo(amountBox, -120, 0, 1400);
      await sleep(400);
      await mouseClick();
      focusAmount(true);
      amtHint.textContent = "typing amount";

      setStatus("typing 2000", true);
      await sleep(350);
      await typeAmountSlow("2000");

      setStatus("rechecking", true);
      await sleep(900);

      setStatus("clearing", true);
      await clearAmountSlow();
      await sleep(520);

      setStatus("typing 4000", true);
      await typeAmountSlow("4000");

      focusAmount(false);
      amtHint.textContent = "reviewing";

      await sleep(700);

      await almostTransferPhase();
      await cancelInterrupt();
      await finalizeTransfer7000();
    }

    /* wiring */
    toMessage.addEventListener("click", async () => {
      showPage(page2);
      initAudio();
      try { await audioCtx.resume(); } catch(e) {}
      startMessage();
    });

    toTransfer.addEventListener("click", async () => {
      showPage(page3);
      initAudio();
      try { await audioCtx.resume(); } catch(e) {}
      runTransactionScene();
    });

    toFinal.addEventListener("click", () => {
      showPage(page4);
    });

    // prevent manual interference
    cancelBtn.addEventListener("click", (e) => e.preventDefault());
    sendBtn.addEventListener("click", (e) => e.preventDefault());
    amountBox.addEventListener("click", (e) => e.preventDefault());
  </script>

</body>
</html>
